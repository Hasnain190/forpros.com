{"ast":null,"code":"import _slicedToArray from\"E:/forpros.com/forpros.com/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{listProducts}from'../actions/productActions';import queryString from'query-string';import{googleAuthenticate}from'../actions/userActions';import{useLocation}from'react-router-dom';import Product from'../components/Product';import Loader from'../components/Loader';import Message from'../components/Message';import ProductCarousal from'../components/ProductCarousal';import{USER_REGISTER_SUCCESS,USER_ACTIVATE_SUCCESS}from'../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function HomeScreen(_ref){var history=_ref.history;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var error=productList.error,loading=productList.loading,products=productList.products;// const userActivate = useSelector(state => state.userActivate)\n// const { success } = userActivate\nvar userRegister=useSelector(function(state){return state.userRegister;});var successRegister=userRegister.success;var keyword=history.location.search;var state=history.location.search;var code=history.location.search;// console.log(keyword)\n// console.log('State: ' + state);\n// console.log('Code: ' + code);\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];useEffect(function(){dispatch(listProducts(keyword));if(successRegister){setMessage('Please check your email to activate your account. We have sent a link there');}// setMessage('')\n// console.log(products.length)\nconsole.log(message);if(state&&code){dispatch(googleAuthenticate(state,code));}},[code,dispatch,keyword,message,state,successRegister]);var searchTerm=keyword.split('=')[1];var searchResults=Number(products.length);return/*#__PURE__*/_jsxs(\"div\",{children:[message&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:message}),!keyword&&/*#__PURE__*/_jsx(ProductCarousal,{}),!keyword&&/*#__PURE__*/_jsx(\"h1\",{children:\"Latest Products (updated)\"})||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Search Result for\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\\"\",searchTerm,\"\\\"\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[searchResults,\" products were found\"]})]}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsx(Row,{children:products.map(function(product){return/*#__PURE__*/_jsx(Col,{sm:12,md:6,lg:4,xl:3,children:/*#__PURE__*/_jsx(Product,{product:product})},product._id);})})]});}export default HomeScreen;","map":{"version":3,"sources":["E:/forpros.com/forpros.com/backend/frontend/src/screens/HomeScreen.js"],"names":["React","useState","useEffect","Row","Col","useDispatch","useSelector","listProducts","queryString","googleAuthenticate","useLocation","Product","Loader","Message","ProductCarousal","USER_REGISTER_SUCCESS","USER_ACTIVATE_SUCCESS","HomeScreen","history","dispatch","productList","state","error","loading","products","userRegister","successRegister","success","keyword","location","search","code","message","setMessage","console","log","searchTerm","split","searchResults","Number","length","map","product","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Row, Col } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { listProducts } from '../actions/productActions'\r\nimport queryString from 'query-string';\r\nimport { googleAuthenticate } from '../actions/userActions'\r\nimport { useLocation } from 'react-router-dom'\r\n\r\n\r\nimport Product from '../components/Product'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\nimport ProductCarousal from '../components/ProductCarousal'\r\nimport { USER_REGISTER_SUCCESS, USER_ACTIVATE_SUCCESS } from '../constants/userConstants'\r\nfunction HomeScreen({ history }) {\r\n\r\n\r\n    const dispatch = useDispatch()\r\n    const productList = useSelector(state => state.productList)\r\n    const { error, loading, products } = productList\r\n\r\n\r\n    // const userActivate = useSelector(state => state.userActivate)\r\n    // const { success } = userActivate\r\n    const userRegister = useSelector(state => state.userRegister)\r\n    const { success:successRegister } = userRegister\r\n\r\n    let keyword = history.location.search\r\n    let state = history.location.search\r\n    let code = history.location.search\r\n\r\n\r\n    // console.log(keyword)\r\n    // console.log('State: ' + state);\r\n    // console.log('Code: ' + code);\r\n\r\n\r\n    const [message, setMessage] = useState('')\r\n\r\n\r\n  \r\n    useEffect(() => {\r\n       \r\n        \r\n        dispatch(listProducts(keyword))\r\n\r\n        if(successRegister){\r\n            setMessage('Please check your email to activate your account. We have sent a link there')\r\n\r\n        }\r\n        // setMessage('')\r\n        // console.log(products.length)\r\n        console.log(message)\r\n        if (state && code) {\r\n            dispatch(googleAuthenticate(state, code));\r\n          }\r\n    }, [code, dispatch, keyword, message, state, successRegister]\r\n    )\r\nconst searchTerm = keyword.split('=')[1]\r\nconst searchResults =  Number(products.length)\r\n\r\n    return (\r\n        <div>\r\n            {message && (<Message variant='success'>{message}</Message>)}\r\n            {!keyword && <ProductCarousal />}\r\n            {(!keyword && (<h1>Latest Products (updated)</h1>)) || (\r\n            <>\r\n\r\n            <h2>Search Result for</h2><p>\"{searchTerm}\"</p>\r\n            <p>{searchResults} products were found</p>\r\n            </>\r\n             )}\r\n            \r\n            {loading ? (<Loader />)\r\n                : error ? (<Message variant='danger'>{error}</Message>)\r\n                    : <Row>\r\n                        {products.map(product => (\r\n                            <Col key={product._id} sm={12} md={6} lg={4} xl={3}>\r\n                                <Product product={product} />\r\n                            </Col>\r\n                        )\r\n                        )}\r\n                    </Row>\r\n            }\r\n     \r\n            \r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomeScreen\r\n"]},"metadata":{},"sourceType":"module"}